## 5.4. LANS -> ARP, Ethernet, switches, VLANS
### 1. MAC address and ARP

+ 32bit IP로만 원하는 영역을 찾아갈 수 없음 -> 동적으로 위치에 따라 달라짐
48bit MAC 주소를 사용해서 원하는 영역을 찾아감 -> 고정

### 2. LAN address and ARP -> IP주소 사용하지만 2계층 프로토콜!!!
+ ARP(Address Resolution Protocol): IP주소를 MAC주소로 변경해주는 프로토콜, ARP table을 유지하여 각 기기들의 IP와 MAC주소를 함께 저장한다. 
### 3. IP주소를 알지만 MAC주소를 모른다면?
+ same LAN(같은 로컬 네트워크에 존재할 때) 
    + A가 B에게 데이터그램을 전송하고 싶지만, B의 MAC주소가 A의 ARP table에 존재하지 않는다.
    + A는 B의 IP주소를 포함한 ARP 쿼리를 브로드캐스트하고, 모든 노드는 ARP 쿼리를 받는다.
    + B는 해당 쿼리를 확인한 후, 자신이 맞다면 MAC주소를 보낸다(유니캐스트)
    + A는 ARP table에 B의 IP, MAC주소를 모두 저장한다.
+ another LAN(다른 로컬 네트워크에 존재할 때) 
    + A와 B가 다른 로컬 네트워크에 존재할 때, 랜에서 맥주소를 사용해서 통신하는 방법은 라우터를 이용한다.
    + A 호스트에서 B 호스트로 데이터를 보내려면, 먼저 B 호스트의 IP 주소를 알아야 한다.
    + A 호스트에서는 자신의 ARP 테이블을 검색하여, 라우터의 MAC 주소를 찾아야 한다. 만약 ARP 테이블에 라우터의 MAC 주소가 없는 경우, ARP 프로토콜을 사용하여 라우터의 MAC 주소를 요청한다.
    + 라우터는 ARP 요청에 응답하여, 자신의 MAC 주소를 A 호스트에게 알려준다.
    + A 호스트는 이제 라우터의 MAC 주소를 알고 있으므로, 데이터를 라우터의 MAC 주소로 패킷화하여 전송한다.
    + 라우터는 수신한 패킷을 자신의 라우팅 테이블을 참조하여, 목적지인 B 호스트로 패킷을 전달한다.
    + B 호스트는 패킷을 수신하고, 자신의 MAC 주소를 A 호스트에게 응답함으로서 A 호스트와 B 호스트는 직접 통신할 수 있게 된다.
### 5. 이더넷 : 데이터 링크 계층에서는 이더넷 프레임을 생성하여, 목적지 MAC 주소를 가진 호스트에게 전송한다. 수신 측에서는 이더넷 프레임을 수신하여 이더넷 헤더와 IP 패킷 데이터를 추출한다. 이렇게 추출된 IP 패킷은 네트워크 계층에서 다시 처리되고, 목적지 호스트에서 수신되게 된다.

1. 이더넷 프레임 구조
+ preamble : 10101010 -> 10101011 형식으로 데이터를 보내 통신의 처음부분을 알린다. 
    + -> 수신자와 동기화 하기 위해
+ 송신지와 수신지의 MAC 주소: 각각 6바이트로 구성. 
+ Type: 이것은 프레임에서 상위 레벨 프로토콜을 나타내며, 대부분의 경우 IP 프로토콜이 사용된다.
+ CRC (순환 중복 검사): 수신 측에서 오류를 감지하는 데 사용 -> 만약 수신 측에서 오류가 발생하면, 해당 프레임은 버려진다. 
2. 이더넷의 특징 : 유선으로 무선보다 에러가 날 확률이 적기 때문에 신뢰성/연결성 보다는 속도를 더 중요시 여김 -> 비신뢰적, 비연결적 + Ethernet의 MAC 프로토콜은 슬롯이 없는 CSMA/CD 프로토콜(binary backoff과 함께)을 사용한다.

### 6. 정리: 이더넷(Ethernet)은 가장 널리 사용되는 데이터 링크 기술 중 하나
+ 오류 감지 및 정정(Error Detection, Correction)
+ 브로드캐스트 채널 공유: 다중 액세스(Multiple Access): 여러 개의 노드가 하나의 통신 채널을 공유할 수 있도록 다중 액세스 기술을 제공한다.
+ 링크 계층 주소 할당(Link Layer Addressing): 데이터 링크 계층은 물리적인 주소를 사용하여 각각의 노드를 구별하고 통신할 수 있도록 주소 할당 기능을 제공한다.
